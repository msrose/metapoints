<!DOCTYPE html>
<html>
  <head>
    <title>Metapoints</title>
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <script src="https://cdn.socket.io/socket.io-1.1.0.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.min.js" type="text/javascript"></script>
    <script src="metapoints.js" type="text/javascript"></script>
  </head>
  <body ng-app="metapoints">
    <div class="metapoints" ng-controller="metapoints">
      <h1>Metapoints</h1>
      <table id="main">
        <tr>
          <th>Rank</th>
          <th>Name</th>
          <th>Metapoints</th>
          <th ng-show="remainingTimeout > 0">{{remainingTimeout}}</th>
          <th ng-show="remainingTimeout <= 0">&nbsp;</th>
          <th>Last Updated By</th>
        </tr>
        <tr ng-repeat="p in pointsData | orderBy:'metapoints':true">
          <td class="align-right">{{$index + 1}}</td>
          <td style="background-color:{{p.active > 0 ? 'lightgreen' : ''}}">{{p.name}}</td>
          <td class="align-right">{{p.metapoints}}</td>
          <td>
            <button class="action-btn" ng-click="inc(p.name)" ng-disabled="timedOut">+</button>
            <button class="action-btn" ng-click="dec(p.name)" ng-disabled="timedOut">-</button>
          </td>
          <td>{{p.lastUpdatedBy}}</td>
        </tr>
      </table>
      <div class="point-sizes">
          <span class="caption">Point Magnitude</span>
          <label ng-repeat="(desc, amount) in pointSizes" class="size-option">
            {{amount}}
            <input type="radio" ng-model="$parent.selectedPointSize" ng-value="desc" name="pointSize">
          </label>
      </div>
      <button id="enable_notify" class="regular-btn" ng-click="enableNotifications()" ng-if="!notificationsEnabled">Enable Notifications</button>
    </div>
  </body>
</html>
